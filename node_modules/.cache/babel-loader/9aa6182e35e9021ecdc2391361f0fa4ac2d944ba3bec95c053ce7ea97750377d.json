{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Pc\\\\Desktop\\\\DnsJumper\\\\backend\\\\nurse-tracking-Patient\\\\src\\\\components\\\\MapDistance.js\";\nimport React from \"react\";\nimport { MapContainer, TileLayer, Marker, Polyline, Popup } from \"react-leaflet\";\nimport L from \"leaflet\";\nimport \"leaflet/dist/leaflet.css\";\n\n// أيقونة مخصصة للطرفين\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst patientIcon = new L.Icon({\n  iconUrl: \"/user-placeholder.png\",\n  iconSize: [38, 38],\n  iconAnchor: [19, 38]\n});\nconst providerIcon = new L.Icon({\n  iconUrl: \"/nurse-icon.png\",\n  iconSize: [38, 38],\n  iconAnchor: [19, 38]\n});\n\n// دالة حساب المسافة بين نقطتين بالإحداثيات (كيلومتر)\nfunction haversine(lat1, lon1, lat2, lon2) {\n  function toRad(x) {\n    return x * Math.PI / 180;\n  }\n  const R = 6371;\n  const dLat = toRad(lat2 - lat1);\n  const dLon = toRad(lon2 - lon1);\n  const a = Math.sin(dLat / 2) * Math.sin(dLat / 2) + Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) * Math.sin(dLon / 2) * Math.sin(dLon / 2);\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n  return R * c;\n}\nexport default function MapDistance({\n  patient,\n  provider\n}) {\n  if (!(patient !== null && patient !== void 0 && patient.lat) || !(patient !== null && patient !== void 0 && patient.lng) || !(provider !== null && provider !== void 0 && provider.lat) || !(provider !== null && provider !== void 0 && provider.lng)) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"\\u0644\\u0627 \\u062A\\u0648\\u062C\\u062F \\u0628\\u064A\\u0627\\u0646\\u0627\\u062A \\u0625\\u062D\\u062F\\u0627\\u062B\\u064A\\u0627\\u062A \\u0643\\u0627\\u0641\\u064A\\u0629\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 82\n  }, this);\n  const patientPos = [parseFloat(patient.lat), parseFloat(patient.lng)];\n  const providerPos = [parseFloat(provider.lat), parseFloat(provider.lng)];\n  const distance = haversine(patientPos[0], patientPos[1], providerPos[0], providerPos[1]);\n  // تقدير الوقت بالدقائق (سرعة متوسطة 30 كم/س + 10 دقائق زحام)\n  const estTime = Math.round(distance / 0.5 + 10); // 0.5 كم/دقيقة = 30 كم/س\n  // تقدير تكلفة الوصول (مثلاً 5 جنيه/كم)\n  const cost = Math.round(distance * 5);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: 350,\n      margin: '16px 0',\n      borderRadius: 12,\n      overflow: 'hidden',\n      boxShadow: '0 2px 12px #3182ce22'\n    },\n    children: [/*#__PURE__*/_jsxDEV(MapContainer, {\n      center: patientPos,\n      zoom: 13,\n      style: {\n        height: 350,\n        width: '100%'\n      },\n      scrollWheelZoom: true,\n      children: [/*#__PURE__*/_jsxDEV(TileLayer, {\n        url: \"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: patientPos,\n        icon: patientIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"\\u0645\\u0648\\u0642\\u0639 \\u0627\\u0644\\u0645\\u0631\\u064A\\u0636\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Marker, {\n        position: providerPos,\n        icon: providerIcon,\n        children: /*#__PURE__*/_jsxDEV(Popup, {\n          children: \"\\u0645\\u0648\\u0642\\u0639 \\u0645\\u0642\\u062F\\u0645 \\u0627\\u0644\\u0631\\u0639\\u0627\\u064A\\u0629\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 48,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Polyline, {\n        positions: [providerPos, patientPos],\n        color: \"#3182ce\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        padding: 8,\n        background: '#fff',\n        borderRadius: '0 0 12px 12px',\n        boxShadow: '0 2px 8px #0001',\n        display: 'flex',\n        justifyContent: 'space-between',\n        alignItems: 'center'\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u0627\\u0644\\u0645\\u0633\\u0627\\u0641\\u0629: \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [distance.toFixed(2), \" \\u0643\\u0645\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 24\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 53,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u0627\\u0644\\u0648\\u0642\\u062A \\u0627\\u0644\\u0645\\u062A\\u0648\\u0642\\u0639: \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [estTime, \" \\u062F\\u0642\\u064A\\u0642\\u0629\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 30\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        children: [\"\\u062A\\u0643\\u0644\\u0641\\u0629 \\u0627\\u0644\\u0648\\u0635\\u0648\\u0644: \", /*#__PURE__*/_jsxDEV(\"b\", {\n          children: [cost, \" \\u062C.\\u0645\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 29\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_c = MapDistance;\nvar _c;\n$RefreshReg$(_c, \"MapDistance\");","map":{"version":3,"names":["React","MapContainer","TileLayer","Marker","Polyline","Popup","L","jsxDEV","_jsxDEV","patientIcon","Icon","iconUrl","iconSize","iconAnchor","providerIcon","haversine","lat1","lon1","lat2","lon2","toRad","x","Math","PI","R","dLat","dLon","a","sin","cos","c","atan2","sqrt","MapDistance","patient","provider","lat","lng","children","fileName","_jsxFileName","lineNumber","columnNumber","patientPos","parseFloat","providerPos","distance","estTime","round","cost","style","width","height","margin","borderRadius","overflow","boxShadow","center","zoom","scrollWheelZoom","url","position","icon","positions","color","padding","background","display","justifyContent","alignItems","toFixed","_c","$RefreshReg$"],"sources":["C:/Users/Pc/Desktop/DnsJumper/backend/nurse-tracking-Patient/src/components/MapDistance.js"],"sourcesContent":["import React from \"react\";\r\nimport { MapContainer, TileLayer, Marker, Polyline, Popup } from \"react-leaflet\";\r\nimport L from \"leaflet\";\r\nimport \"leaflet/dist/leaflet.css\";\r\n\r\n// أيقونة مخصصة للطرفين\r\nconst patientIcon = new L.Icon({\r\n  iconUrl: \"/user-placeholder.png\",\r\n  iconSize: [38, 38],\r\n  iconAnchor: [19, 38],\r\n});\r\nconst providerIcon = new L.Icon({\r\n  iconUrl: \"/nurse-icon.png\",\r\n  iconSize: [38, 38],\r\n  iconAnchor: [19, 38],\r\n});\r\n\r\n// دالة حساب المسافة بين نقطتين بالإحداثيات (كيلومتر)\r\nfunction haversine(lat1, lon1, lat2, lon2) {\r\n  function toRad(x) { return x * Math.PI / 180; }\r\n  const R = 6371;\r\n  const dLat = toRad(lat2 - lat1);\r\n  const dLon = toRad(lon2 - lon1);\r\n  const a = Math.sin(dLat/2) * Math.sin(dLat/2) +\r\n    Math.cos(toRad(lat1)) * Math.cos(toRad(lat2)) *\r\n    Math.sin(dLon/2) * Math.sin(dLon/2);\r\n  const c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a));\r\n  return R * c;\r\n}\r\n\r\nexport default function MapDistance({ patient, provider }) {\r\n  if (!patient?.lat || !patient?.lng || !provider?.lat || !provider?.lng) return <div>لا توجد بيانات إحداثيات كافية</div>;\r\n  const patientPos = [parseFloat(patient.lat), parseFloat(patient.lng)];\r\n  const providerPos = [parseFloat(provider.lat), parseFloat(provider.lng)];\r\n  const distance = haversine(patientPos[0], patientPos[1], providerPos[0], providerPos[1]);\r\n  // تقدير الوقت بالدقائق (سرعة متوسطة 30 كم/س + 10 دقائق زحام)\r\n  const estTime = Math.round((distance / 0.5) + 10); // 0.5 كم/دقيقة = 30 كم/س\r\n  // تقدير تكلفة الوصول (مثلاً 5 جنيه/كم)\r\n  const cost = Math.round(distance * 5);\r\n  return (\r\n    <div style={{width:'100%',height:350,margin:'16px 0',borderRadius:12,overflow:'hidden',boxShadow:'0 2px 12px #3182ce22'}}>\r\n      <MapContainer center={patientPos} zoom={13} style={{height:350,width:'100%'}} scrollWheelZoom={true}>\r\n        <TileLayer url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\" />\r\n        <Marker position={patientPos} icon={patientIcon}>\r\n          <Popup>موقع المريض</Popup>\r\n        </Marker>\r\n        <Marker position={providerPos} icon={providerIcon}>\r\n          <Popup>موقع مقدم الرعاية</Popup>\r\n        </Marker>\r\n        <Polyline positions={[providerPos, patientPos]} color=\"#3182ce\" />\r\n      </MapContainer>\r\n      <div style={{padding:8,background:'#fff',borderRadius:'0 0 12px 12px',boxShadow:'0 2px 8px #0001',display:'flex',justifyContent:'space-between',alignItems:'center'}}>\r\n        <span>المسافة: <b>{distance.toFixed(2)} كم</b></span>\r\n        <span>الوقت المتوقع: <b>{estTime} دقيقة</b></span>\r\n        <span>تكلفة الوصول: <b>{cost} ج.م</b></span>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}